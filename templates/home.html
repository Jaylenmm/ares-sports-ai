{% extends 'base.html' %}
{% block title %}Ares AI – Home{% endblock %}
{% block content %}
<div class="space-y-4">
    <!-- Sport chooser -->
    <div class="flex overflow-x-auto space-x-2 items-center" style="-webkit-overflow-scrolling: touch;">
        {% for s in sports %}
        <a href="/?sport={{ s }}" class="px-3 py-2 rounded-2xl border border-slate-200 shadow-sm whitespace-nowrap bg-white text-black {{ 'ring-1 ring-slate-300' if selected_sport==s }}">{{ s|upper }}</a>
        {% endfor %}
    </div>

    <!-- Live Carousel -->
    {% if selected_sport and live_games %}
    <div class="space-y-2">
        <h2 class="text-sm font-semibold text-white">Live Now</h2>
        <div class="flex overflow-x-auto space-x-3 pb-1">
            {% for g in live_games %}
            <a href="/check-your-bet?s={{ g.home_team | urlencode }}" class="min-w-[260px] bg-white text-black rounded-2xl border border-slate-200 shadow-sm p-3 block">
                <div class="text-xs uppercase tracking-wide text-slate-700">{{ g.sport }}</div>
                <div class="mt-1 font-semibold">{{ g.away_team|title }} @ {{ g.home_team|title }}</div>
                <div class="text-sm text-slate-700">{{ g.date.strftime('%a %b %d, %I:%M %p') }} ET</div>
                <div class="mt-2 flex items-center justify-between text-sm">
                    <div>Score: {{ g.away_score }} - {{ g.home_score }}</div>
                    {% if g.spread or g.total or g.home_moneyline or g.away_moneyline %}
                    <div class="text-right">
                        {% if g.spread %}<div>Spread: {{ g.spread }}</div>{% endif %}
                        {% if g.total %}<div>Total: {{ g.total }}</div>{% endif %}
                    </div>
                    {% endif %}
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Featured Odds -->
    {% if selected_sport and featured_games %}
    <div class="space-y-2">
        <h2 class="text-sm font-semibold text-white">Featured Odds</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            {% for g in featured_games %}
            <a href="/check-your-bet?s={{ g.home_team | urlencode }}" class="bg-white text-black rounded-2xl border border-slate-200 shadow-sm p-3 block">
                <div class="text-xs uppercase tracking-wide text-slate-700">{{ g.sport }}</div>
                <div class="mt-1 font-semibold">{{ g.away_team|title }} @ {{ g.home_team|title }}</div>
                <div class="text-sm text-slate-700">{{ g.date.strftime('%a %b %d, %I:%M %p') }} ET</div>
                <div class="mt-2 grid grid-cols-4 gap-2 text-sm">
                    <div>
                        <div class="text-slate-600">ML</div>
                        <div>{{ g.away_moneyline if g.away_moneyline is not none else '-' }}</div>
                        <div>{{ g.home_moneyline if g.home_moneyline is not none else '-' }}</div>
                    </div>
                    <div>
                        <div class="text-slate-600">Spread</div>
                        <div>{{ g.spread if g.spread is not none else '-' }}</div>
                    </div>
                    <div>
                        <div class="text-slate-600">Total</div>
                        <div>{{ g.total if g.total is not none else '-' }}</div>
                    </div>
                    <div>
                        <div class="text-slate-600">Book</div>
                        <div>{{ g.bookmaker or '-' }}</div>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Upcoming List -->
    <div class="space-y-2">
        <div class="flex items-center justify-between">
            <h2 class="text-sm font-semibold text-white">Upcoming</h2>
            {% if selected_sport %}
            <a href="/games?sport={{ selected_sport }}" class="text-xs text-slate-300 underline">See all</a>
            {% endif %}
        </div>
        <div class="space-y-2">
            {% for g in upcoming_games %}
            <a href="/check-your-bet?s={{ g.home_team | urlencode }}" class="bg-white text-black rounded-2xl border border-slate-200 shadow-sm p-3 flex items-center justify-between block">
                <div>
                    <div class="text-xs uppercase tracking-wide text-slate-700">{{ g.sport }}</div>
                    <div class="font-semibold">{{ g.away_team|title }} @ {{ g.home_team|title }}</div>
                    <div class="text-sm text-slate-700">{{ g.date.strftime('%a %b %d, %I:%M %p') }} ET</div>
                </div>
                <div class="text-right text-sm">
                    {% if g.spread %}<div>Spread: {{ g.spread }}</div>{% endif %}
                    {% if g.total %}<div>Total: {{ g.total }}</div>{% endif %}
                    {% if g.bookmaker %}<div class="text-slate-600">{{ g.bookmaker }}</div>{% endif %}
                </div>
            </a>
            {% endfor %}
        </div>
    </div>

    {% if selected_sport %}
    <!-- Featured Player Props -->
    {% if featured_props %}
    <div class="space-y-2">
        <div class="flex items-center justify-between">
            <h2 class="text-sm font-semibold text-white">Featured Player Props</h2>
            <a href="/check-your-bet#players" class="text-xs text-slate-300 underline">See all</a>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            {% for p in featured_props %}
            <div class="bg-white text-black rounded-2xl border border-slate-200 shadow-sm p-3">
                <div class="text-xs uppercase tracking-wide text-slate-700">{{ selected_sport|upper }}</div>
                <div class="mt-1 font-semibold">{{ p.player_name }}</div>
                <div class="text-sm text-slate-700">{{ p.market.replace('player_','')|replace('_',' ')|title }}: {{ p.line }}</div>
                <div class="mt-2 grid grid-cols-2 gap-2 text-sm">
                    <a href="/check-your-bet#players" class="bg-white text-black rounded-xl border border-slate-300 px-3 py-2 text-center hover:bg-slate-50">Over {{ p.line }} ({{ p.over_price }})</a>
                    <a href="/check-your-bet#players" class="bg-white text-black rounded-xl border border-slate-300 px-3 py-2 text-center hover:bg-slate-50">Under {{ p.line }} ({{ p.under_price }})</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- ESPN News -->
    <div class="space-y-2">
        <div class="flex items-center justify-between">
            <h2 class="text-sm font-semibold text-white">Latest {{ selected_sport|upper }} News</h2>
            <a href="https://www.espn.com/{{ selected_sport }}/" target="_blank" class="text-xs text-slate-300 underline">More on ESPN</a>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            {% for n in news_articles %}
            <a class="bg-white text-black rounded-2xl border border-slate-200 shadow-sm p-3 hover:bg-slate-50" href="{{ n.link }}" target="_blank">
                <div class="font-semibold">{{ n.title }}</div>
                {% if n.snippet %}<div class="text-sm text-slate-700 mt-1">{{ n.snippet }}</div>{% endif %}
                <div class="text-xs text-slate-600 mt-1">{{ n.published }} · Source: {{ n.source or 'ESPN' }}</div>
            </a>
            {% endfor %}
            {% if not news_articles %}
            <div class="text-slate-300">No news available.</div>
            {% endif %}
        </div>
    </div>
    {% endif %}
 
</div>
{% endblock %}

